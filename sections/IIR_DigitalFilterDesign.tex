\section{IIR Digital filter Design\buch{Chapter 11}}
\subsection{Bilinear Transformation\buchSeite{563-565}}
Designflow:
\begin{center}
\input{tikz/BilinearTransformation}
\end{center}
Maps from z-plane to the s-plane (from the analog frequency to the digital
frequency)

\begin{tabularx}{\textwidth}{|l|X|X|}
	\hline
	\textbf{Filter} & \textbf{bilinear transformation} & \textbf{frequency map}
	\\ \hline
	lowpass & 
	$s = f(z) = \frac{1 - z^{-1}}{1 + z^{-1}}$ &
	$ \Omega = g(\omega) = \tan(\frac{\omega}{2})$
	\\ \hline
	highpass & 
	$s = f(z) = \frac{1 + z^{-1}}{1 - z^{-1}}$ &
	$ \Omega = g(\omega) = - \cot(\frac{\omega}{2})$
	\\ \hline
	bandpass & 
	$s = f(z) = \frac{1 - 2cz^{-1} +z^{-2}}{1 - z^{-2}}$ &
	$ \Omega = g(\omega) = \frac{c - \cos(\omega)}{\sin(\omega)}$
	\\ \hline
	bandstop & 
	$s = f(z) = \frac{1 - z^{-2}}{1 - 2cz^{-1} + z^{-2}}$ &
	$ \Omega = g(\omega) = \frac{\sin(\omega)}{\cos(\omega) - c}$ 
	\\ \hline
\end{tabularx}
\vspace{1em}

Normalerweise (in allen folgenden Filter) wird nur die Formel für "lowpass" benötigt. 

\subsection{First-Order LP/HP, Second-Order Peaking an Notching Filters\buchSeite{566-581}}
\begin{tabular}{|l|l|l|}
	\hline
	cutoff/center frequency & $f_c$ &
	\\ \hline
	sampling rate & $f_s$ &
	\\ \hline
	bandwith & $\Delta f$ & Peaking/Notching filter only
	\\ \hline
	digital cutoff/center frequency & $\omega_c$ & $ = \frac{2\pi f_c}{f_s}$ \qquad (usually at 3dB-point)
	\\ \hline
	drop in dB at $f_c$ & $A_c$ & $= -10\log_{10}(G_c^2) = -20\log_{10}(G_c)$ \qquad (usually 3dB)
	\\ \hline
	drop factor & $G_c$ & $=10^{-A_c/20} \qquad \longrightarrow $ If $A_c = 3$dB $\rightarrow G_c^2 = 1/2$
	\\ \hline
\end{tabular}

\begin{tabular}{|l|l|l|l|l|l|}
	\hline
	\textbf{filter} & $H(z) = $ & $H_a(s) = $ & $\alpha = $ & $a=$ & $b=$
	\\ \hline
	lowpass	&
	$b\frac{1 + z^{-1}}{1 - a z^{-1}}$ &
	$\frac{\alpha}{s + \alpha}$	&
	$ \frac{G_c}{\sqrt{1-G_c^2}}\tan\left(\frac{\omega_c}{2}\right)
	= \tan\left(\frac{\omega_c}{2}\right)\vert_{G_c^2 = \frac{1}{2}}$&
	$\frac{1 - \alpha}{1 + \alpha}$ &
	$\frac{\alpha}{1 + \alpha} = \frac{1 - a}{2}$	
	\\ \hline
	highpass &
	$b\frac{1 - z^{-1}}{1 - a z^{-1}}$ &
	$\frac{s}{s + \alpha}$ &
	$\frac{\sqrt{1-G_c^2}}{G_c}\tan\left(\frac{\omega_c}{2}\right)
	=\tan\left(\frac{\omega_c}{2}\right)\vert_{G_c^2 = \frac{1}{2}}$&
	$\frac{1-\alpha}{1+\alpha}$&
	$\frac{1}{1+\alpha} = \frac{1 + a}{2}$
	\\ \hline
	notch &
	$b\frac{1-2\cos(\omega_0) z^{-1} + z^{-2}}{1 -2b \cos(\omega_o) z^{-1} + (2b-1)z^{-2}}$&
	$\frac{s^2 + \Omega_0^2}{s^2+\alpha s + \Omega_0^2}$&
	$\frac{\sqrt{1-G_B^2}}{G_B}(1+\Omega_0^2)\tan\left(\frac{\Delta\omega}{2}\right)$&
	--&
	$\frac{1}{1+\frac{\sqrt{1-G_B^2}}{G_B}\tan\left(\frac{\Delta\omega}{2}\right)}$
	\\ \hline
	peak &
	$(1-b)\frac{1-z^{-2}}{1-2b\cos(\omega_0)z^{-1} + (2b-1)z^{-2}}$&
	$\frac{\alpha s}{s^2 + \alpha s + \Omega_0^2}$&
	$\frac{G_B}{\sqrt{1-G_B^2}}(1+\Omega_0^2)\tan\left(\frac{\Delta\omega}{2}\right)$&
	--&
	$\frac{1}{1+\frac{G_B}{\sqrt{1-G_B^2}}\tan\left(\frac{\Delta\omega}{2}\right)}$
	\\ \hline
\end{tabular}
\vspace{1em}

Designflow:
\begin{enumerate}
	\item Given the cutoff frequency $\omega_c$ and the corresponding gain $A_c$ in dB, compute $G_c$.
	\item Compute the analog parameter $\alpha$
	\item Compute the digital filter coefficients $\{a,b\}$.
\end{enumerate}

\subsection{Parametric Equalizer Filters\buchSeite{581-589}}
\subsubsection{Lowpass shelving filter}
\[
	H_{LP}(z) = 
	\frac{
		\left(\frac{G_0 + G\beta}{1+\beta}\right) - 
		\left(\frac{G_0-G\beta}{1+\beta}\right)z^{-1}
	}{
		1 -
		\left(\frac{1-\beta}{1+\beta}\right)z^{-1}
	}
	\qquad
	\beta =
		\sqrt{\frac{G_c^2-G_0^2}{G^2-G_c^2}}
		\tan\left(\frac{\omega_c}{2}\right)
\]

\subsubsection{Highpass shelving filter}
\[
	H_{HP}(z) = 
	\frac{
		\left(\frac{G_0 + G\beta}{1+\beta}\right) + 
		\left(\frac{G_0-G\beta}{1+\beta}\right)z^{-1}
	}{
		1 +
		\left(\frac{1-\beta}{1+\beta}\right)z^{-1}
	}
	\qquad
	\beta =
		\sqrt{\frac{G_c^2-G_0^2}{G^2-G_c^2}}
		\cot\left(\frac{\omega_c}{2}\right)
\]

\subsection{Comb Filters\buchSeite{590}}
The lowpass and highpass shelving filters of the previous section can be turned into periodic comb or notch filters.
This can be accomplished by the replicating transformation: $z \rightarrow ^{D}$ which shrinks the frequency response by a factor of $D$ and replicates it $D$ times such that $D$ copies if it fit into the Nyquist interval.

\subsection{Higher Order Filters\buchSeite{592-631}}
The quantities $\{\epsilon_{pass}, \epsilon_{stop}\}$ control the depths of the passband and stopband.
They can be written in the equivalent forms:
\begin{align*}
	\epsilon_{pass} &= \sqrt{10^{A_{pass}/10} - 1} & \Longleftrightarrow &&
	A_{pass}&= 10\log_{10}(1 + \epsilon_{pass}^2) \\
	\epsilon_{stop} &= \sqrt{10^{A_{stop}/10} - 1} & \Longleftrightarrow &&
	A_{stop}&= 10\log_{10}(1 + \epsilon_{stop}^2)
\end{align*}

The specifications of the equivalent analog filter are $\{\Omega_{pass}, \Omega_{stop}, A_{pass}, A_{stop} \}$, or, $\{\Omega_{pass}, \Omega_{stop}, \epsilon_{pass}, \epsilon_{stop} \}$, where the analog frequencies are obtained by prewraping the digital frequencies.
\begin{align*}
	\Omega_{pass} &= \tan\left(\frac{\omega_{pass}}{2}\right) & 
	\Omega_{stop} &= \tan\left(\frac{\omega_{stop}}{2}\right) \\
	\omega_{pass} &= \frac{2\pi f_{pass}}{f_s} &
	\omega_{stop} &= \frac{2\pi f_{stop}}{f_s} 
\end{align*}

\subsubsection{Analog Lowpass Butterworth Filters\buchSeite{594-599}}
Analog lowpass Butterworth filters are characterized by just two parameters:
filter order $N$ and the 3-dB normalization frequency $\Omega_0$.
\[
	\left|H(z)\right|^2 =
		\frac{1}{1 + \left(\frac{\Omega}{\Omega_0}\right)^{2N}}
\]

With the given information, we can calculate the two parameters:
\begin{align*}
	N_{exact} &= \frac{
			\ln(\epsilon_{stop} / \epsilon_{pass})
		}{
			\ln(\Omega_{stop} / \Omega_{pass})
		}
	= \frac{\ln(e)}{\ln(w)} &	
	e &= \frac{\epsilon_{stop}}{\epsilon_{pass}}
	   = \sqrt{\frac{10^{A_{stop}/10} -1}{10^{A_{pass}/10} -1}}&
	w &= \frac{\Omega_{stop}}{\Omega_{pass}}&	
\end{align*}

$N$ must be an integer, we choose it to be the next integer above $N_{exact}$.

\[
	\Omega_0 = \frac{
			\Omega_{pass}
		}{
			\left(10^{A_{pass}/10}-1\right)^{1/2N}
		} = \frac{
			\Omega_{pass}
		}{
			\epsilon_{pass}^{1/N}
		}
\]

\subsubsection{Digital Lowpass Filters\buchSeite{599ff}}
\subsubsection{Digital Highpass Filters\buchSeite{603ff}}
\subsubsection{Digital Bandpass Filters\buchSeite{606ff}}
\subsubsection{Digital Bandstop Filters\buchSeite{611ff}}
\subsubsection{Chebyshev Filter Design\buchSeite{615ff}}
